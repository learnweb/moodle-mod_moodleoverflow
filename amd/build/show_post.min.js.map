{"version":3,"file":"show_post.min.js","sources":["../src/show_post.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\nimport {getString} from \"core/str\";\nimport {prefetchStrings} from 'core/prefetch';\n/**\n * JavaScript for\n *\n * @module     mod_moodleoverflow/show_post\n * @copyright  2025 Tamaro Walter\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nconst showpostButton = document.getElementById('moodleoverflow_showpost');\nconst postElement = document.getElementById('moodleoverflow_original_post');\n\nconst Selectors = {\n    actions: {\n        showpostbutton: '[data-action=\"mod_moodleoverflow/showpost_button\"]',\n    },\n};\n\n/**\n * Init function.\n */\nexport function init() {\n    prefetchStrings('moodleoverflow', ['showpost_expand', 'showpost_collapse',]);\n    postElement.setAttribute('expanded', 'false');\n    postElement.style.maxHeight = '0px';\n    addEventListener();\n}\n\n/**\n * Event listener.\n */\nconst addEventListener = () => {\n    document.addEventListener('click', async e => {\n        if (e.target.closest(Selectors.actions.showpostbutton)) {\n            if (postElement.getAttribute('expanded') === 'true') {\n                showpostButton.textContent = await getString('showpost_expand', 'moodleoverflow');\n                postElement.style.maxHeight = '0px';\n                postElement.setAttribute('expanded', 'false');\n            } else {\n                showpostButton.textContent =  await getString('showpost_collapse', 'moodleoverflow');\n                postElement.style.maxHeight = `${postElement.scrollHeight}px`;\n                postElement.setAttribute('expanded', 'true');\n            }\n        }\n    });\n};\n"],"names":["prefetchStrings","postElement","setAttribute","style","maxHeight","addEventListener","showpostButton","document","getElementById","Selectors","showpostbutton","async","e","target","closest","getAttribute","textContent","getString","scrollHeight"],"mappings":"qLAqCO,YACH,EAAAA,UAAAA,iBAAgB,iBAAkB,CAAC,kBAAmB,sBACtDC,YAAYC,aAAa,WAAY,SACrCD,YAAYE,MAAMC,UAAY,MAC9BC,kBACJ;;;;;;;;AAjBA,MAAMC,eAAiBC,SAASC,eAAe,2BACzCP,YAAcM,SAASC,eAAe,gCAEtCC,kBACO,CACLC,eAAgB,sDAiBxB,MAAML,iBAAmBA,KACrBE,SAASF,iBAAiB,QAASM,UAC3BC,EAAEC,OAAOC,QAAQL,kBAAkBC,kBACU,SAAzCT,YAAYc,aAAa,aACzBT,eAAeU,kBAAoB,EAAAC,gBAAU,kBAAmB,kBAChEhB,YAAYE,MAAMC,UAAY,MAC9BH,YAAYC,aAAa,WAAY,WAErCI,eAAeU,kBAAqB,EAAAC,gBAAU,oBAAqB,kBACnEhB,YAAYE,MAAMC,UAAY,GAAGH,YAAYiB,iBAC7CjB,YAAYC,aAAa,WAAY,YAInD"}