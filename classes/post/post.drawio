<mxfile host="65bd71144e">
    <diagram id="Cz_WheFDdQsW5oh7_IA2" name="Page-1">
        <mxGraphModel dx="2645" dy="2466" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1100" pageHeight="850" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="2" value="Post" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;" parent="1" vertex="1">
                    <mxGeometry x="-180" y="290" width="540" height="400" as="geometry">
                        <mxRectangle x="-140" y="-60" width="70" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="3" value="- id: int&#10;- discussion: Discussion-&gt;id&#10;- parent: Post-&gt;id&#10;- userid: int&#10;- created: int&#10;- modified: int&#10;- message: String&#10;- messageformat: int&#10;- attachment: char&#10;- mailed: int&#10;- reviewed: int &#10;- timereviewed: int" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="2" vertex="1">
                    <mxGeometry y="26" width="540" height="184" as="geometry"/>
                </mxCell>
                <mxCell id="4" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;strokeColor=inherit;" parent="2" vertex="1">
                    <mxGeometry y="210" width="540" height="8" as="geometry"/>
                </mxCell>
                <mxCell id="5" value="+ construct(discussion:int, parent:post, userid:int, attachment:array) // same as add_new_post()&#10;+ delete_post($post:Post, $deletechildren:boolean, $cm:object, $moodleoverflow:object):static void&#10;+ update_post($message:String):boolean&#10;+ get_post_full(): Post&#10;+ add_attachment(attachment:char): void&#10;+ get_attachment(): char&#10;+ print_post(...): $renderer-&gt;render:post($mustachdata)&#10;+ get_discussion(): $Discussionobject&#10;+ get_moodleoverflow(): $Moodleoverflowobject&#10;+ get_parentpost(): $Postobject&#10;+ weitere Funktionen" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="2" vertex="1">
                    <mxGeometry y="218" width="540" height="182" as="geometry"/>
                </mxCell>
                <mxCell id="6" value="Post_Form" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;" parent="1" vertex="1">
                    <mxGeometry x="620" y="20" width="470" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="7" value=" &#10;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="6" vertex="1">
                    <mxGeometry y="26" width="470" height="24" as="geometry"/>
                </mxCell>
                <mxCell id="8" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;strokeColor=inherit;" parent="6" vertex="1">
                    <mxGeometry y="50" width="470" height="8" as="geometry"/>
                </mxCell>
                <mxCell id="9" value="+ definition():void      // builds form depending on interaction (start, edit, reply, delete)&#10;+ validation($data, $files):array    //of errors&#10;+ attachment_options($moodleoverflow): static array" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="6" vertex="1">
                    <mxGeometry y="58" width="470" height="62" as="geometry"/>
                </mxCell>
                <mxCell id="12" style="edgeStyle=none;html=1;entryX=0;entryY=0.166;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" target="6" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="420" y="40" as="sourcePoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="10" value="Post.php&lt;br&gt;" style="html=1;dropTarget=0;" parent="1" vertex="1">
                    <mxGeometry x="240" y="20" width="180" height="90" as="geometry"/>
                </mxCell>
                <mxCell id="11" value="" style="shape=module;jettyWidth=8;jettyHeight=4;" parent="10" vertex="1">
                    <mxGeometry x="1" width="20" height="20" relative="1" as="geometry">
                        <mxPoint x="-27" y="7" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="14" value="" style="endArrow=classic;html=1;exitX=0.001;exitY=0.03;exitDx=0;exitDy=0;exitPerimeter=0;entryX=1;entryY=0.665;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="9" target="10" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="580" y="150" as="sourcePoint"/>
                        <mxPoint x="630" y="100" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="15" value="" style="endArrow=classic;html=1;exitX=0.223;exitY=0.998;exitDx=0;exitDy=0;exitPerimeter=0;entryX=-0.001;entryY=0.188;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="10" target="24" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="330" y="330" as="sourcePoint"/>
                        <mxPoint x="310" y="230" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="280" y="200"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="16" value="3. Interaktion und ggf postobjekt" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="430" y="10" width="180" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="17" value="4. form-&amp;gt;get_data() mit relevanten infos" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="445" y="80" width="150" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="18" value="5. Alles ist fertig" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="260" y="230" width="100" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="23" value="Post_control" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;" parent="1" vertex="1">
                    <mxGeometry x="480" y="270" width="540" height="200" as="geometry">
                        <mxRectangle x="-140" y="-60" width="70" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="24" value="  " style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="23" vertex="1">
                    <mxGeometry y="26" width="540" height="54" as="geometry"/>
                </mxCell>
                <mxCell id="25" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;strokeColor=inherit;" parent="23" vertex="1">
                    <mxGeometry y="80" width="540" height="8" as="geometry"/>
                </mxCell>
                <mxCell id="26" value="+ construct($urlparameter)&#10;+ detect_interaction($urlparameter)  //ruft die build_prepost functions&#10;+ Getter von prepost, interaction, information&#10;- build_prepost_create($moodleoverflow)&#10;- build_prepost_reply($replypostid)&#10;- build_prepost_edit($editpostid)&#10;- build_prepost_delete($deletpostid)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="23" vertex="1">
                    <mxGeometry y="88" width="540" height="112" as="geometry"/>
                </mxCell>
                <mxCell id="27" value="" style="endArrow=classic;html=1;entryX=0.299;entryY=-0.01;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" target="23" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="400" y="110" as="sourcePoint"/>
                        <mxPoint x="570" y="200" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="400" y="200"/>
                            <mxPoint x="640" y="200"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="28" value="1. Alles in Ordnung?" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="380" y="170" width="160" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="29" value="" style="endArrow=classic;html=1;entryX=0.667;entryY=1;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" target="10" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="600" y="270" as="sourcePoint"/>
                        <mxPoint x="651.46" y="278.0000000000001" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="600" y="210"/>
                            <mxPoint x="360" y="210"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="30" value="2. Ergebnis:&amp;nbsp;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="435" y="210" width="115" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="31" value="" style="endArrow=classic;html=1;exitX=0.445;exitY=1.014;exitDx=0;exitDy=0;exitPerimeter=0;entryX=1.005;entryY=0.4;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="26" target="5" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="700" y="570" as="sourcePoint"/>
                        <mxPoint x="720" y="640" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="720" y="581"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="32" value="1.5 Nutze Funktionen aus dieser Klasse&lt;br&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="510" y="550" width="160" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="33" value="&lt;h1&gt;Bisheriger Stand&lt;/h1&gt;&lt;div style=&quot;text-align: center; font-size: 13px;&quot;&gt;Die post.php übergibt seine urlparameter der Klasse post_control. Diese prüft dann, welche Interaktion vorliegt und verifiziert weiterhin intern den neuen oder bestehenden post (stimmt die moodleoverflowid, gibts überhaupt die discussion in die geschrieben wird usw.). Die dabei gesammelten infos (die discussionid, den kontext, usw) werden in einem object gespeichert und die post_control erstellt dann einen &quot;prepost&quot;, der dann alle vollständigen infos enthält (z.b. den text des zu editierenden posts oder den präfix &quot;RE:&quot; bei einem neuen Antwortpost u.ä.)&lt;br&gt;Auf die vorliegende Interaktion, wichtigen informationen und den pre-post kann dann die post.php zugreifen.&lt;br&gt;&lt;br&gt;Diese Infos sollen dann der Post_Form übergeben werden, die dann je nach interaktion eine andere seite lädt (bei erstellen/antworten/ändern soll es das normale Form sein, bei löschen soll ein löschen buttonfeld geben)&lt;br&gt;&lt;br&gt;Wurde in die Form der Text/attachments eingegeben und abgesendet oder den löschen button geklickt dann meldet die post.php das der Post_control, die dann die Funktionen der Post-Klasse verwendet, um dann wirklich einen post zu löschen, zu verändern oder hinzuzufügen.&amp;nbsp;&lt;br&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-360" y="-20" width="600" height="300" as="geometry"/>
                </mxCell>
                <mxCell id="35" value="" style="endArrow=classic;html=1;fontSize=13;exitX=0.742;exitY=1.013;exitDx=0;exitDy=0;exitPerimeter=0;entryX=1.012;entryY=0.723;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="26" target="5" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="340" y="240" as="sourcePoint"/>
                        <mxPoint x="881" y="660" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="880" y="640"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="36" value="6. Erstelle/änder/ lösche inen post" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;" parent="1" vertex="1">
                    <mxGeometry x="480" y="610" width="250" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="37" value="&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;/*&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;* Wie funktioniert das erstellen, ändern und löschen eines posts?&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;* Was mach die post.php und die classes/post_form.php, wozu sind post.mustache und post_dummy.mustache da?&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;* Welche funktionen zu den posts hat die locallib.php?&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;*&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;* =&amp;gt; Was sollte in diese Klasse (classes/post.php) integriert werden, was sollte sie können? Was lässt man in der post.php/locallib.php, braucht man später die postform noch?&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;*&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;* Funktionen aus der Locallib, die mit posts zu tun haben:&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;* - function moodleoverflow_get_post_full($postid) -&amp;gt; holt infos um einen post zu printen&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;* - function moodleoverflow_user_can_see_post($moodleoverflow, $discussion, $post, $cm)&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;* - function moodleoverflow_get_all_discussion_posts($discussionid, $tracking, $modcontext) -&amp;gt; holt sich die posts einer discussion&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;* - function moodleoverflow_print_post(...)&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;* - function moodleoverflow_print_posts_nested&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;* - function get_attachments($post, $cm)&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;* - function moodleoverflow_add_attachment($post, $forum, $cm) {&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;* - function moodleoverflow_add_new_post($post) {&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;* - function moodleoverflow_update_post($newpost) {&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;* - function moodleoverflow_count_replies($post, $onlyreviewed) -&amp;gt; zählt antworten auf eine frage&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;* - function moodleoverflow_delete_post($post, $deletechildren, $cm, $moodleoverflow) {&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;* - function moodleoverflow_add_discussion($discussion, $modulecontext, $userid = null) {&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;*&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;* Vorüberlegung zu classes/post.php:&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;* - Jeder Post im moodleoverflow ist ein Objekt identifizierbar über seine ID&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;* - Bei der erstellung einer neuen Diskussion (automatisch mit einem post) oder beim antworten/kommentieren soll ein neues objekt DIESER Klasse erstellt werden&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;* =&amp;gt; realisierung der funktionen add_new_post, update_post, delete_post&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;*&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;* - Die funktionen:&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;*&amp;nbsp; &amp;nbsp;- get_post_full, print_post,&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;*&amp;nbsp; &amp;nbsp;- add_attachment und get_attachments&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;*&amp;nbsp; &amp;nbsp;sollten auch hier programmiert sein.&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;*&amp;nbsp; &amp;nbsp;Es soll auch möglich sein, den Elternpost, die Diskussion oder das Moodleoverflow als objekt zurückzugeben, damit alle Datenbankaufrufe hier passieren und nicht woanders.&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;*&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;* - Diese Funktionen sollten in der Locallib bleiben:&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;*&amp;nbsp; &amp;nbsp;- user_can_see_post, da es von außen nur auf einen existierenden post zugreift&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;*&amp;nbsp; &amp;nbsp;- get_all_discussion_posts, da ein post nicht weitere posts in seiner umgebung kennt (außer seinen Elternpost)&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;*&amp;nbsp; &amp;nbsp;- print_post_nested, auch hier der gleiche grund, außerdem ruft print_post_nested auch nur print_posts_nested und geht zum nächsten Post&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;*&amp;nbsp; &amp;nbsp;- count_replies, da hier eine sammlung von posts abgeprüft wird.&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;*&amp;nbsp; &amp;nbsp;- add_discussion() bleibt in der locallib, da hier nur die construct methode (add_new_post()) aufgerufen wird.&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;*&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;*&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;*&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;* Wie funktionieren post.php und classes/post_form.php?&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;*&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;* post.php:&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;* Bei jeder art von Interaktion (erstellen, ändern, löschen) wird die post.php aufgerufen&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;* =&amp;gt; Im 1. Schritt wird geprüft, welche Art von Interaktion vorliegt. -&amp;gt; vielliecht auch das in classes/post.php auslagern&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;* =&amp;gt; Im 2. Schritt wird ein neues post_form Objekt gebaut und dem objekt neue funktionen übergeben&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;*&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;*&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;* classes/post_form.php:&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;* Bildet nur die form ab, wo man den titel, Inhalt und attachments seines posts eintragen kann&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;*/&lt;/font&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-550" y="-1080" width="1530" height="870" as="geometry"/>
                </mxCell>
                <mxCell id="39" value="Ein teil von add:new_post wird in der post_control ausgeführt (setzen der created und modified time, setzen des reviewed status" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;" parent="1" vertex="1">
                    <mxGeometry x="-490" y="-170" width="480" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="40" value="&lt;b&gt;&lt;font style=&quot;font-size: 22px;&quot;&gt;UPDATE&amp;nbsp; 05.07:&lt;/font&gt;&lt;/b&gt; &lt;br&gt;Add_attachments: aufpassen&lt;br&gt;- daten aus dem Form sollten in der Post_control gut übergeben werden, sodass in post-&amp;gt;add_attachment der post-parameter alle nötigen infos hat (den inhalt aus dem attribut &quot;attachments&quot;), damit die funktion dass auch richtig ließt&lt;br&gt;&lt;br&gt;Vorschlag: &quot;dekodier&quot;-funktion in der Post-control oder der post klasse, die die daten aus der Form richtig umwandelt und dann den konstruktor der Post-klasse öffnet, um dann richtig den post mit seinen attachments hinzuzufügen" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
                    <mxGeometry x="-620" y="370" width="380" height="290" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>