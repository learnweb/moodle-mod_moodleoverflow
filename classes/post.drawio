<mxfile host="65bd71144e">
    <diagram id="Cz_WheFDdQsW5oh7_IA2" name="Page-1">
        <mxGraphModel dx="2971" dy="1240" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1100" pageHeight="850" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="2" value="Post" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;" parent="1" vertex="1">
                    <mxGeometry x="-400" y="320" width="540" height="450" as="geometry">
                        <mxRectangle x="-140" y="-60" width="70" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="3" value="- id: int&#10;- discussion: Discussion-&gt;id&#10;- parent: Post-&gt;id&#10;- userid: int&#10;- created: int&#10;- modified: int&#10;- message: String&#10;- messageformat: int&#10;- attachment: char&#10;- mailed: int&#10;- reviewed: int &#10;- timereviewed: int" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="2" vertex="1">
                    <mxGeometry y="26" width="540" height="184" as="geometry"/>
                </mxCell>
                <mxCell id="4" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;strokeColor=inherit;" parent="2" vertex="1">
                    <mxGeometry y="210" width="540" height="8" as="geometry"/>
                </mxCell>
                <mxCell id="5" value="+ construct(discussion:int, parent:post, userid:int, attachment:array) // same as add_new_post()&#10;+ delete_post($post:Post, $deletechildren:boolean, $cm:object, $moodleoverflow:object):static void&#10;+ update_post($message:String):boolean&#10;+ get_post_full(): Post&#10;+ add_attachment(attachment:char): void&#10;+ get_attachment(): char&#10;+ print_post(...): $renderer-&gt;render:post($mustachdata)&#10;+ get_discussion(): $Discussionobject&#10;+ get_moodleoverflow(): $Moodleoverflowobject&#10;+ get_parentpost(): $Postobject" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="2" vertex="1">
                    <mxGeometry y="218" width="540" height="232" as="geometry"/>
                </mxCell>
                <mxCell id="6" value="Post_Form" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;" parent="1" vertex="1">
                    <mxGeometry x="550" y="320" width="470" height="450" as="geometry"/>
                </mxCell>
                <mxCell id="7" value=" &#10;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="6" vertex="1">
                    <mxGeometry y="26" width="470" height="74" as="geometry"/>
                </mxCell>
                <mxCell id="8" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;strokeColor=inherit;" parent="6" vertex="1">
                    <mxGeometry y="100" width="470" height="8" as="geometry"/>
                </mxCell>
                <mxCell id="9" value="+ definition():void      // builds form depending on interaction (start, edit, reply, delete)&#10;+ validation($data, $files):array    //of errors&#10;+ attachment_options($moodleoverflow): static array" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="6" vertex="1">
                    <mxGeometry y="108" width="470" height="342" as="geometry"/>
                </mxCell>
                <mxCell id="12" style="edgeStyle=none;html=1;" edge="1" parent="1" source="10" target="6">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="10" value="Post.php&lt;br&gt;" style="html=1;dropTarget=0;" vertex="1" parent="1">
                    <mxGeometry x="240" y="20" width="180" height="90" as="geometry"/>
                </mxCell>
                <mxCell id="11" value="" style="shape=module;jettyWidth=8;jettyHeight=4;" vertex="1" parent="10">
                    <mxGeometry x="1" width="20" height="20" relative="1" as="geometry">
                        <mxPoint x="-27" y="7" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="13" value="Die /Post.php prüft anhand mitgegebener parameter, welche Art von Interaktion (new discussion, edit, reply, delete) vorliegt. Zusätzlich prüft es, ob der User eingeloggt ist und schreiben darf und andere capabilities. Dann erstellt es ein Object der Post_form klasse, wobei es die Art von Interaktion und ggf. das Postobjekt übermittelt was geändert/beantwortet/gelöscht wird.&lt;br&gt;Die classes/Post_form.php prüft dann Anhand der Interaktion, ob der Post oder das Moodleoverflow existiert und ob alle übermittelten Daten stimmig sind. Je nach Interaktion wird dann die Form mit jeweiligen Adaptionen gebaut (bei Antworten im Titel wird ein &quot;RE: ...&quot; eingebaut).&lt;br&gt;Wird bei der Post_form auf den &quot;Post to Forum&quot; gedrückt, so werden alle wichtigen informationen (nachricht, titel und attachments oder deletion des posts) der /post.php&lt;br&gt;Die /Post.php ruft dann eine Funktion der classes/post.php auf, die dann einen neuen post erstellt oder den bestehenden anpasst/löscht" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
                    <mxGeometry x="-360" y="50" width="380" height="220" as="geometry"/>
                </mxCell>
                <mxCell id="14" value="" style="endArrow=classic;html=1;exitX=-0.006;exitY=0.03;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.562;entryY=0.998;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="6" target="10">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="580" y="150" as="sourcePoint"/>
                        <mxPoint x="630" y="100" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="15" value="" style="endArrow=classic;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="10" target="2">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="330" y="330" as="sourcePoint"/>
                        <mxPoint x="380" y="280" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="16" value="1. Interaktion und ggf postobjekt" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
                    <mxGeometry x="480" y="180" width="180" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="17" value="2. form-&amp;gt;get_data() mit relevanten infos" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
                    <mxGeometry x="340" y="260" width="150" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="18" value="3. &quot;Okay mach jetzt genau das&quot;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
                    <mxGeometry x="60" y="200" width="150" height="30" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>